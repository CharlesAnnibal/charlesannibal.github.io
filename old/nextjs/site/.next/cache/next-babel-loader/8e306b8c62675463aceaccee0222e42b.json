{"ast":null,"code":"var _jsxFileName = \"D:\\\\ProjsWeb\\\\charlesannibal.github.io\\\\site\\\\src\\\\components\\\\Chat\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { ChatWrapper } from './style.js';\nimport { HubConnectionBuilder } from '@microsoft/signalr';\n\nconst Chat = () => {\n  const {\n    0: connection,\n    1: setConnection\n  } = useState(new HubConnectionBuilder().withUrl(\"https://localhost:5001/chat\").withAutomaticReconnect().build());\n\n  const ChatImplementation = () => {\n    //Disable send button until connection is established\n    document.getElementById(\"sendButton\").disabled = true;\n    connection.on(\"ReceiveMessage\", function (user, message) {\n      var msg = message.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n      console.log(user, msg);\n      var encodedMsg = user + \" says \" + msg;\n      var li = document.createElement(\"li\");\n      li.textContent = encodedMsg;\n      document.getElementById(\"messagesList\").appendChild(li);\n    }); //connection.off(\"ReceiveMessage\");\n\n    connection.start().then(function () {\n      document.getElementById(\"sendButton\").disabled = false;\n    }).catch(function (err) {\n      return console.error(err.toString());\n    });\n  };\n\n  useEffect(() => {\n    ChatImplementation();\n    return () => {\n      connection.off(\"ReceiveMessage\");\n    };\n  });\n\n  const _sendMessage = () => {\n    console.log(\"clicou\");\n    var user = \"usere\"; //document.getElementById(\"userInput\").value;\n\n    var message = \"message2\"; //document.getElementById(\"messageInput\").value;\n\n    connection.invoke(\"SendMessage\", user, message).catch(function (err) {\n      return console.error(err.toString());\n    }); //event.preventDefault();\n  };\n\n  return __jsx(ChatWrapper, {\n    className: \"chat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, \"test\"), __jsx(\"ul\", {\n    id: \"ReceiveMessage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }), __jsx(\"button\", {\n    id: \"sendButton\",\n    onClick: event => {\n      event.stopPropagation();\n\n      _sendMessage();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, \"Enviar\"));\n};\n\nexport default Chat;","map":{"version":3,"sources":["D:/ProjsWeb/charlesannibal.github.io/site/src/components/Chat/index.js"],"names":["React","useEffect","useState","ChatWrapper","HubConnectionBuilder","Chat","connection","setConnection","withUrl","withAutomaticReconnect","build","ChatImplementation","document","getElementById","disabled","on","user","message","msg","replace","console","log","encodedMsg","li","createElement","textContent","appendChild","start","then","catch","err","error","toString","off","_sendMessage","invoke","event","stopPropagation"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,YAA5B;AACA,SAASC,oBAAT,QAAqC,oBAArC;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAEjB,QAAM;AAAA,OAACC,UAAD;AAAA,OAAaC;AAAb,MAA8BL,QAAQ,CAAC,IAAIE,oBAAJ,GACMI,OADN,CACc,6BADd,EAEMC,sBAFN,GAGMC,KAHN,EAAD,CAA5C;;AAIA,QAAMC,kBAAkB,GAAG,MAAM;AAG/B;AACAC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,QAAtC,GAAiD,IAAjD;AAEAR,IAAAA,UAAU,CAACS,EAAX,CAAc,gBAAd,EAAgC,UAAUC,IAAV,EAAgBC,OAAhB,EAAyB;AACvD,UAAIC,GAAG,GAAGD,OAAO,CAACE,OAAR,CAAgB,IAAhB,EAAsB,OAAtB,EAA+BA,OAA/B,CAAuC,IAAvC,EAA6C,MAA7C,EAAqDA,OAArD,CAA6D,IAA7D,EAAmE,MAAnE,CAAV;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ,EAAkBE,GAAlB;AAEA,UAAII,UAAU,GAAGN,IAAI,GAAG,QAAP,GAAkBE,GAAnC;AACA,UAAIK,EAAE,GAAGX,QAAQ,CAACY,aAAT,CAAuB,IAAvB,CAAT;AACAD,MAAAA,EAAE,CAACE,WAAH,GAAiBH,UAAjB;AACAV,MAAAA,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCa,WAAxC,CAAoDH,EAApD;AACD,KARD,EAN+B,CAgB/B;;AAGAjB,IAAAA,UAAU,CAACqB,KAAX,GAAmBC,IAAnB,CAAwB,YAAY;AAClChB,MAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,QAAtC,GAAiD,KAAjD;AACD,KAFD,EAEGe,KAFH,CAES,UAAUC,GAAV,EAAe;AACtB,aAAOV,OAAO,CAACW,KAAR,CAAcD,GAAG,CAACE,QAAJ,EAAd,CAAP;AACD,KAJD;AAKD,GAxBD;;AA0BA/B,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,kBAAkB;AAElB,WAAO,MAAI;AACTL,MAAAA,UAAU,CAAC2B,GAAX,CAAe,gBAAf;AACD,KAFD;AAGD,GANQ,CAAT;;AAQA,QAAMC,YAAY,GAAG,MAAM;AACzBd,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,QAAIL,IAAI,GAAG,OAAX,CAFyB,CAEP;;AAClB,QAAIC,OAAO,GAAG,UAAd,CAHyB,CAGD;;AACxBX,IAAAA,UAAU,CAAC6B,MAAX,CAAkB,aAAlB,EAAiCnB,IAAjC,EAAuCC,OAAvC,EAAgDY,KAAhD,CAAsD,UAAUC,GAAV,EAAe;AACnE,aAAOV,OAAO,CAACW,KAAR,CAAcD,GAAG,CAACE,QAAJ,EAAd,CAAP;AACD,KAFD,EAJyB,CAOzB;AACD,GARD;;AAYA,SACE,MAAC,WAAD;AAAa,IAAA,SAAS,EAAC,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAEE;AAAI,IAAA,EAAE,EAAC,gBAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE;AAAQ,IAAA,EAAE,EAAC,YAAX;AAAwB,IAAA,OAAO,EAAGI,KAAD,IAAS;AAACA,MAAAA,KAAK,CAACC,eAAN;;AAAyBH,MAAAA,YAAY;AAAG,KAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,CADF;AAOD,CA3DD;;AA4DA,eAAe7B,IAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { ChatWrapper } from './style.js';\r\nimport { HubConnectionBuilder } from '@microsoft/signalr';\r\n\r\nconst Chat = () => {\r\n\r\n  const [connection, setConnection] = useState(new HubConnectionBuilder()\r\n                                                    .withUrl(\"https://localhost:5001/chat\")\r\n                                                    .withAutomaticReconnect()\r\n                                                    .build());\r\n  const ChatImplementation = () => {\r\n    \r\n\r\n    //Disable send button until connection is established\r\n    document.getElementById(\"sendButton\").disabled = true;\r\n\r\n    connection.on(\"ReceiveMessage\", function (user, message) {\r\n      var msg = message.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n      console.log(user, msg)\r\n      \r\n      var encodedMsg = user + \" says \" + msg;\r\n      var li = document.createElement(\"li\");\r\n      li.textContent = encodedMsg;\r\n      document.getElementById(\"messagesList\").appendChild(li);\r\n    });\r\n\r\n    //connection.off(\"ReceiveMessage\");\r\n\r\n\r\n    connection.start().then(function () {\r\n      document.getElementById(\"sendButton\").disabled = false;\r\n    }).catch(function (err) {\r\n      return console.error(err.toString());\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    ChatImplementation()\r\n\r\n    return ()=>{\r\n      connection.off(\"ReceiveMessage\");\r\n    }\r\n  })\r\n\r\n  const _sendMessage = () => {\r\n    console.log(\"clicou\")\r\n    var user = \"usere\"//document.getElementById(\"userInput\").value;\r\n    var message = \"message2\"//document.getElementById(\"messageInput\").value;\r\n    connection.invoke(\"SendMessage\", user, message).catch(function (err) {\r\n      return console.error(err.toString());\r\n    });\r\n    //event.preventDefault();\r\n  }\r\n\r\n\r\n  \r\n  return (\r\n    <ChatWrapper className=\"chat\">\r\n      <p>test</p>\r\n      <ul id=\"ReceiveMessage\"></ul>\r\n      <button id=\"sendButton\" onClick={(event)=>{event.stopPropagation(); _sendMessage()}}>Enviar</button>\r\n    </ChatWrapper>\r\n  );\r\n};\r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}